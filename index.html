<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ í”„ë¦¬ë¯¸ì—„ ë°ì´ì§€ í”„ë¡œí•„ ì¹´ë“œ ìƒì„±ê¸°</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --main-pink: #f7a7bb; --bg-gray: #f8f9fa; }
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #eee; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .wrapper { display: flex; gap: 30px; max-width: 1200px; width: 100%; justify-content: center; align-items: flex-start; }
        
        /* ì™¼ìª½ ì„¤ì • íŒ¨ë„ */
        .input-panel { width: 450px; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-height: 90vh; overflow-y: auto; }
        .input-panel h3 { margin-top: 0; color: var(--main-pink); border-bottom: 2px solid var(--main-pink); padding-bottom: 10px; }
        .control-group { background: #fff5f7; padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #ffe0e6; }
        .control-group label { display: block; font-weight: bold; font-size: 13px; margin-bottom: 5px; color: #555; }
        .slider-box { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .slider-box input { flex: 1; accent-color: var(--main-pink); }
        .slider-box span { width: 40px; font-size: 12px; color: #888; text-align: right; }

        .form-group { margin-bottom: 12px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #444; }
        input[type="text"], input[type="number"], select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        
        .btn-primary { background: var(--main-pink); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; font-size: 16px; transition: 0.3s; margin-top: 10px; }
        .btn-primary:hover { background: #e696a9; }

        /* ì˜¤ë¥¸ìª½ í”„ë¡œí•„ ì¹´ë“œ */
        .profile-card { 
            width: 380px; background: white; border-radius: 20px; overflow: hidden; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.2); position: relative;
            image-rendering: -webkit-optimize-contrast; /* ì„ ëª…ë„ í–¥ìƒ */
        }
        
        /* ì¹´ë“œ í—¤ë” - ì¡°ì ˆ ê°€ëŠ¥í•œ ì˜ì—­ */
        .card-header { 
            background: var(--main-pink); height: 70px; position: relative; 
            display: flex; align-items: center; justify-content: center; overflow: hidden;
        }
        #displayLogo { position: absolute; height: 30px; object-fit: contain; z-index: 2; }
        #logoText { position: absolute; color: white; font-weight: 800; font-size: 1.4em; z-index: 1; white-space: nowrap; }

        /* ì‚¬ì§„ ì˜ì—­ - ì—¬ë°±/ì˜ë¦¼ ë°©ì§€ */
        .photo-area { 
            width: 100.1%; /* 1px ì—¬ë°± ë°©ì§€ */
            height: 420px; background-color: #f0f0f0; background-size: cover; 
            background-position: center; background-repeat: no-repeat;
            display: flex; justify-content: center; align-items: center;
            color: #aaa; font-style: italic; cursor: pointer; border: none; margin-left: -0.05%;
        }
        .photo-area.drag-over { background-color: #fff0f5; border: 3px dashed var(--main-pink); }

        /* ì¹´ë“œ ë°”ë”” */
        .card-body { padding: 25px; background: white; }
        .name-age { font-size: 2.2em; font-weight: 900; color: #222; margin-bottom: 10px; letter-spacing: -1px; }
        .name-age span { font-size: 0.8em; font-weight: normal; color: #666; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-top: 1px solid #eee; border-bottom: 1px solid #eee; padding: 15px 0; margin-bottom: 15px; }
        .info-item { font-size: 14px; color: #555; }
        .info-item b { color: #222; }

        .tagline { color: var(--main-pink); font-style: italic; font-weight: bold; border-left: 4px solid var(--main-pink); padding-left: 12px; margin-bottom: 20px; line-height: 1.4; }
        
        .hobby-title { font-size: 12px; color: #5b995b; font-weight: bold; margin-bottom: 8px; opacity: 0.8; }
        .hobby-list { display: flex; flex-wrap: wrap; gap: 6px; }
        .hobby-tag { background: #e8f5e9; color: #5b995b; padding: 4px 10px; border-radius: 15px; font-size: 12px; font-weight: bold; }

        #downloadBtn { background: #5b995b; margin-top: 20px; }
    </style>
</head>
<body>

<h2 style="color: var(--main-pink);">ğŸŒ¸ ë°ì´ì§€ í”„ë¦¬ë¯¸ì—„ í”„ë¡œí•„ ìƒì„±ê¸°</h2>

<div class="wrapper">
    <div class="input-panel">
        <form id="profileForm">
            <h3>1. ë¡œê³  & í…ìŠ¤íŠ¸ ì„¸ë¶€ ì„¤ì •</h3>
            <div class="control-group">
                <label>ğŸš© ë¡œê³  ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>
                <input type="file" id="logoInput" accept="image/*" style="margin-bottom:10px;">
                
                <label>ë¡œê³  í¬ê¸°</label>
                <div class="slider-box"><input type="range" id="lSize" min="10" max="150" value="30"><span id="v-lSize">30</span></div>
                <label>ë¡œê³  ìœ„ì¹˜ (ê°€ë¡œ / ì„¸ë¡œ)</label>
                <div class="slider-box"><input type="range" id="lX" min="-150" max="150" value="-80"><span id="v-lX">-80</span></div>
                <div class="slider-box"><input type="range" id="lY" min="-30" max="30" value="0"><span id="v-lY">0</span></div>
            </div>

            <div class="control-group">
                <label>ğŸ”  ë¡œê³  í…ìŠ¤íŠ¸ ì„¤ì •</label>
                <input type="text" id="logoTextInput" value="DAISY Hookups" style="margin-bottom:10px;">
                
                <label>ê¸€ì í¬ê¸°</label>
                <div class="slider-box"><input type="range" id="tSize" min="10" max="40" value="22"><span id="v-tSize">22</span></div>
                <label>ê¸€ì ìœ„ì¹˜ (ê°€ë¡œ / ì„¸ë¡œ)</label>
                <div class="slider-box"><input type="range" id="tX" min="-150" max="150" value="40"><span id="v-tX">40</span></div>
                <div class="slider-box"><input type="range" id="tY" min="-30" max="30" value="0"><span id="v-tY">0</span></div>
            </div>

            <h3>2. í”„ë¡œí•„ ì •ë³´ ì…ë ¥</h3>
            <div class="form-group">
                <label>ğŸ“¸ ì‚¬ì§„ (ë“œë˜ê·¸ ê°€ëŠ¥)</label>
                <input type="file" id="photoInput" accept="image/*">
            </div>
            <div style="display: flex; gap: 10px;">
                <div class="form-group"><label>ì´ë¦„</label><input type="text" id="inName" value="ê¹€ë°ì´ì§€"></div>
                <div class="form-group"><label>ë‚˜ì´</label><input type="number" id="inAge" value="28"></div>
            </div>
            <div style="display: flex; gap: 10px;">
                <div class="form-group"><label>í‚¤(cm)</label><input type="number" id="inHeight" value="165"></div>
                <div class="form-group"><label>ëª¸ë¬´ê²Œ(kg)</label><input type="number" id="inWeight" value="50"></div>
            </div>
            <div class="form-group">
                <label>ê°€ìŠ´ ì‚¬ì´ì¦ˆ</label>
                <select id="inBust">
                    <option value="A">Aì»µ</option><option value="A+">A+ì»µ</option>
                    <option value="B">Bì»µ</option><option value="B+">B+ì»µ</option>
                    <option value="C" selected>Cì»µ</option><option value="C+">C+ì»µ</option>
                    <option value="D">Dì»µ</option><option value="D+">D+ì»µ</option>
                    <option value="E">Eì»µ</option><option value="F">Fì»µ</option>
                </select>
            </div>
            <div class="form-group"><label>ì§ì—…</label><input type="text" id="inJob" value="ë§ˆì¼€í„°"></div>
            <div class="form-group"><label>í•œ ì¤„ ì†Œê°œ</label><input type="text" id="inTag" value="ë”°ëœ»í•œ ëŒ€í™”ì™€ ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ê³µìœ í•´ìš”."></div>
            <div class="form-group"><label>ì·¨ë¯¸ (ì‰¼í‘œ êµ¬ë¶„)</label><textarea id="inHobby">ì˜í™” ê°ìƒ, ìš”ë¦¬, ì™€ì¸, ë…ì„œ</textarea></div>

            <button type="submit" class="btn-primary">âœ¨ ì •ë³´ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</button>
        </form>
    </div>

    <div class="output-panel">
        <div class="profile-card" id="cardCapture">
            <div class="card-header">
                <img id="displayLogo" src="" alt="" style="display:none;">
                <div id="logoText">DAISY Hookups</div>
            </div>
            
            <div class="photo-area" id="photoZone">ì‚¬ì§„ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>

            <div class="card-body">
                <div class="name-age"><span id="outName">ê¹€ë°ì´ì§€</span> <span><span id="outAge">28</span>ì„¸</span></div>
                
                <div class="info-grid">
                    <div class="info-item">í‚¤: <b><span id="outHeight">165</span>cm</b></div>
                    <div class="info-item">ëª¸ë¬´ê²Œ: <b><span id="outWeight">50</span>kg</b></div>
                    <div class="info-item">ì‚¬ì´ì¦ˆ: <b><span id="outBust">C</span>ì»µ</b></div>
                    <div class="info-item">ì§ì—…: <b><span id="outJob">ë§ˆì¼€í„°</span></b></div>
                </div>

                <div class="tagline" id="outTag">"ë”°ëœ»í•œ ëŒ€í™”ì™€ ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ê³µìœ í•´ìš”."</div>

                <div class="hobby-title"># MY INTERESTS</div>
                <div class="hobby-list" id="outHobby"></div>
            </div>
        </div>
        <button id="downloadBtn" class="btn-primary">ğŸ–¼ï¸ ì´ˆì´ˆê³ í™”ì§ˆ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
    </div>
</div>

<script>
    const $ = id => document.getElementById(id);

    // [1. ë¡œê³  ì´ë¯¸ì§€ ë° í…ìŠ¤íŠ¸ ì‹¤ì‹œê°„ ì¡°ì ˆ]
    const updateHeader = () => {
        const lS = $('lSize').value, lX = $('lX').value, lY = $('lY').value;
        const tS = $('tSize').value, tX = $('tX').value, tY = $('tY').value;
        const textValue = $('logoTextInput').value;

        // ê°’ í‘œì‹œ
        $('v-lSize').innerText = lS; $('v-lX').innerText = lX; $('v-lY').innerText = lY;
        $('v-tSize').innerText = tS; $('v-tX').innerText = tX; $('v-tY').innerText = tY;

        // ìŠ¤íƒ€ì¼ ì ìš©
        $('displayLogo').style.height = lS + 'px';
        $('displayLogo').style.transform = `translate(${lX}px, ${lY}px)`;
        
        $('logoText').innerText = textValue;
        $('logoText').style.fontSize = (tS / 16) + 'em';
        $('logoText').style.transform = `translate(${tX}px, ${tY}px)`;
    };

    ['lSize', 'lX', 'lY', 'tSize', 'tX', 'tY', 'logoTextInput'].forEach(id => $(id).addEventListener('input', updateHeader));

    // [2. ë¡œê³  íŒŒì¼ ì—…ë¡œë“œ]
    $('logoInput').addEventListener('change', function(e) {
        if (this.files[0]) {
            const reader = new FileReader();
            reader.onload = (ex) => { $('displayLogo').src = ex.target.result; $('displayLogo').style.display = 'block'; };
            reader.readAsDataURL(this.files[0]);
        }
    });

    // [3. í”„ë¡œí•„ ì‚¬ì§„ ì²˜ë¦¬ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)]
    const handlePhoto = (file) => {
        if (!file.type.match('image.*')) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            $('photoZone').style.backgroundImage = `url('${e.target.result}')`;
            $('photoZone').innerText = '';
        };
        reader.readAsDataURL(file);
    };

    $('photoInput').addEventListener('change', e => e.target.files[0] && handlePhoto(e.target.files[0]));
    
    ['dragenter', 'dragover'].forEach(n => $('photoZone').addEventListener(n, e => { e.preventDefault(); $('photoZone').classList.add('drag-over'); }));
    ['dragleave', 'drop'].forEach(n => $('photoZone').addEventListener(n, e => { e.preventDefault(); $('photoZone').classList.remove('drag-over'); }));
    $('photoZone').addEventListener('drop', e => { e.preventDefault(); handlePhoto(e.dataTransfer.files[0]); });
    $('photoZone').addEventListener('click', () => $('photoInput').click());

    // [4. ì •ë³´ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸]
    $('profileForm').addEventListener('submit', (e) => {
        e.preventDefault();
        $('outName').innerText = $('inName').value;
        $('outAge').innerText = $('inAge').value;
        $('outHeight').innerText = $('inHeight').value;
        $('outWeight').innerText = $('inWeight').value;
        $('outBust').innerText = $('inBust').value;
        $('outJob').innerText = $('inJob').value;
        $('outTag').innerText = `"${$('inTag').value}"`;

        const hobbies = $('inHobby').value.split(',').map(h => h.trim()).filter(h => h);
        $('outHobby').innerHTML = hobbies.map(h => `<span class="hobby-tag">${h}</span>`).join('');
    });

    // [5. ê³ í™”ì§ˆ ë‹¤ìš´ë¡œë“œ (Scale 4)]
    $('downloadBtn').addEventListener('click', () => {
        const btn = $('downloadBtn');
        btn.innerText = "â³ ê³ í™”ì§ˆ ìƒì„± ì¤‘...";
        html2canvas($('cardCapture'), {
            scale: 4, 
            useCORS: true,
            allowTaint: true,
            backgroundColor: null
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = `${$('inName').value}_í”„ë¡œí•„_ì¹´ë“œ.png`;
            link.href = canvas.toDataURL("image/png", 1.0);
            link.click();
            btn.innerText = "ğŸ–¼ï¸ ì´ˆì´ˆê³ í™”ì§ˆ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ";
        });
    });

    // ì´ˆê¸° ì‹¤í–‰
    updateHeader();
    $('profileForm').dispatchEvent(new Event('submit'));
</script>

</body>
</html>
