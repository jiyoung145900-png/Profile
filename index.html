<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ ë°ì´ì§€ ì—¬ì„± í”„ë¡œí•„ ìƒì„± í¼</title>
    <style>
        /* ê¸°ë³¸ì ì¸ ìŠ¤íƒ€ì¼ë§ */
        body { font-family: Arial, sans-serif; background-color: #f0f8f0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        h2 { color: #5b995b; text-align: center; margin-bottom: 25px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; }
        input[type="text"], input[type="number"], textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        textarea { resize: vertical; height: 80px; }
        .btn-primary { 
            background-color: #f7a7bb; color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; width: 100%; transition: background-color 0.3s; 
            margin-top: 20px;
        }
        .btn-primary:hover { background-color: #e696a9; }
        
        /* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #downloadBtn {
            background-color: #5b995b;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            width: auto;
            display: block; /* ë¸”ë¡ ìš”ì†Œë¡œ ë³€ê²½ */
            margin: 15px auto 0; /* ì¤‘ì•™ ì •ë ¬ */
            transition: background-color 0.3s;
        }
        #downloadBtn:hover {
            background-color: #4a804a;
        }

        #output { margin-top: 30px; padding: 15px; background-color: #e6f7e6; border-radius: 8px; border: 1px dashed #5b995b; }
        #profileTextDisplay { white-space: pre-wrap; font-size: 14px; }
        .success { color: #5b995b; font-weight: bold; display: block; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒ¸ ë°ì´ì§€ ì—¬ì„± í”„ë¡œí•„ ì •ë³´ ì…ë ¥</h2>

    <form id="profileForm">
        <div class="form-group">
            <label for="name">1. ì´ë¦„</label>
            <input type="text" id="name" required>
        </div>

        <div class="form-group">
            <label for="age">2. ë‚˜ì´</label>
            <input type="number" id="age" min="18" max="99" required>
        </div>

        <div class="form-group">
            <label for="location">3. í˜„ì¬ ê±°ì£¼ ì§€ì—­</label>
            <input type="text" id="location" required>
        </div>

        <div class="form-group">
            <label for="occupation">4. ì§ì—…/ì§ì¢…</label>
            <input type="text" id="occupation" required>
        </div>

        <div class="form-group">
            <label for="interests">5. ì·¨ë¯¸/ê´€ì‹¬ì‚¬ (ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„)</label>
            <textarea id="interests" placeholder="ì˜ˆ: ìš”ê°€, ë…ì„œ, ì—¬í–‰" required></textarea>
        </div>

        <div class="form-group">
            <label for="tagline">6. í•œ ì¤„ ì†Œê°œ</label>
            <input type="text" id="tagline" required>
        </div>

        <div class="form-group">
            <label for="photoUrl">7. í”„ë¡œí•„ ì‚¬ì§„ URL</label>
            <input type="text" id="photoUrl" placeholder="ì˜ˆ: http://example.com/photo.jpg">
        </div>

        <button type="submit" class="btn-primary">í”„ë¡œí•„ ìƒì„± ë° í™•ì¸</button>
    </form>

    <div id="output" style="display: none;">
        <span class="success"></span>
        <pre id="profileTextDisplay">ì—¬ê¸°ì— ìƒì„±ëœ í”„ë¡œí•„ ì •ë³´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</pre>
        <button id="downloadBtn">í”„ë¡œí•„ ì •ë³´ ë‹¤ìš´ë¡œë“œ (.txt)</button>
    </div>
</div>

<script>
    document.getElementById('profileForm').addEventListener('submit', function(e) {
        e.preventDefault(); 

        // í¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const name = document.getElementById('name').value;
        const age = document.getElementById('age').value;
        const location = document.getElementById('location').value;
        const occupation = document.getElementById('occupation').value;
        const interestsInput = document.getElementById('interests').value;
        const tagline = document.getElementById('tagline').value;
        const photoUrl = document.getElementById('photoUrl').value;
        
        // ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ì·¨ë¯¸/ê´€ì‹¬ì‚¬ ì²˜ë¦¬
        const interestsArray = interestsInput.split(',').map(item => item.trim()).filter(item => item !== '');

        // ì„ì‹œ ID ë° í˜„ì¬ ì‹œê°„ ìƒì„±
        const profileId = 'DPR_' + Math.floor(10000 + Math.random() * 90000);
        const createdAt = new Date().toLocaleString('ko-KR');

        // ë‹¤ìš´ë¡œë“œì™€ ì¶œë ¥ì— ì‚¬ìš©í•  ìˆœìˆ˜ í…ìŠ¤íŠ¸ ìƒì„±
        const rawProfileText = `
--- ğŸŒ¸ ìƒì„±ëœ ë°ì´ì§€ ì—¬ì„± í”„ë¡œí•„ ğŸŒ¸ ---
ID: ${profileId}
ì´ë¦„: ${name}
ë‚˜ì´: ${age}ì„¸
ì§€ì—­: ${location}
ì§ì—…: ${occupation}
âœ¨ í•œ ì¤„ ì†Œê°œ: "${tagline}"
ì·¨ë¯¸/ê´€ì‹¬ì‚¬: ${interestsArray.join(', ')}
ì‚¬ì§„ URL: ${photoUrl || 'URL ë¯¸ì…ë ¥'}
ë“±ë¡ì¼: ${createdAt}
--------------------------------------
        `.trim();

        // 1. í™”ë©´ ì¶œë ¥
        document.querySelector('#output .success').textContent = 'âœ… í”„ë¡œí•„ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!';
        document.getElementById('profileTextDisplay').textContent = rawProfileText;
        document.getElementById('output').style.display = 'block';

        // 2. ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ë²„íŠ¼ì— ì—°ê²°
        document.getElementById('downloadBtn').onclick = () => downloadProfile(rawProfileText, name);
    });


    /**
     * ìƒì„±ëœ í”„ë¡œí•„ í…ìŠ¤íŠ¸ë¥¼ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
     * @param {string} textToDownload - ë‹¤ìš´ë¡œë“œí•  í…ìŠ¤íŠ¸ ë‚´ìš©
     * @param {string} profileName - íŒŒì¼ ì´ë¦„ì— ì‚¬ìš©í•  ì´ë¦„
     */
    function downloadProfile(textToDownload, profileName) {
        // í…ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ Blob ê°ì²´ë¡œ ë³€í™˜ (í…ìŠ¤íŠ¸ íŒŒì¼ í˜•ì‹)
        const blob = new Blob([textToDownload], { type: 'text/plain' });
        
        // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        
        // íŒŒì¼ ì´ë¦„ ì„¤ì •
        const fileName = `${profileName}_ë°ì´ì§€_í”„ë¡œí•„_${new Date().getFullYear()}.txt`;
        
        a.href = url;
        a.download = fileName;
        
        // ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
        document.body.appendChild(a);
        a.click();
        
        // ì‚¬ìš©ì´ ëë‚œ URL ê°ì²´ ë° a íƒœê·¸ ì œê±°
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
</script>

</body>
</html>
